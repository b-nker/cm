(()=>{console.log(fxhash),console.log(fxrand());const e=document.getElementById("video"),t=document.getElementById("video-canvas"),a=document.getElementById("canvas"),i=window.devicePixelRatio?window.devicePixelRatio:1,n=[{r:1,g:.8166667,b:0,a:1},{r:.858,g:.04999999,b:.1981334,a:1},{r:0,g:.4963198,b:.6617598,a:1},{r:.565491,g:.7887076,b:.809,a:1},{r:.05707906,g:.6960859,b:.08902937,a:1}];let o,r,d,l,s,c,w=window.innerWidth,g=window.innerHeight,m=(Math.min(w,g),{aspectRatio:w/g,fieldOfView:45,nearPlane:.1,farPlane:1700}),h=new THREE.Scene;window.onload=()=>{e.width=w,o=new THREE.PerspectiveCamera(m.fieldOfView,m.aspectRatio,m.nearPlane,m.farPlane),o.position.set(0,0,1800),o.lookAt(0,0,0),h.background=new THREE.Color(0),r=new THREE.WebGLRenderer({canvas:a,antialias:!0,alpha:!0}),r.setPixelRatio(i),r.gammaInput=!0,r.gammaOutput=!0,r.setSize(w,g),r.render(h,o),c=new THREE.OrbitControls(o,r.domElement),window.navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((t=>{e.srcObject=t,e.onloadeddata=()=>{e.play(),createParticles()}})),animate()},animate=()=>{console.log("animate"),render(),window.addEventListener("DOMContentLoaded",(e=>{console.log("inside")})),window.addEventListener("resize",(()=>{w=window.innerWidth,g=window.innerHeight,resize()}))},render=e=>{if(requestAnimationFrame((e=>{render(e)})),s){let e=getImageDataFromVideo();for(let t=0,a=d.vertices.length;t<a;t++){let a=d.vertices[t],i=4*t,n=(e.data[i]+e.data[i+1]+e.data[i+2])/3;a.z=n<200?10*n:100}d.verticesNeedUpdate=!0}r.render(h,o)},resize=()=>{w=window.innerWidth,g=window.innerHeight,o.aspect=w/g,o.updateProjectionMatrix(),r.setSize(w,g)},getImageDataFromVideo=()=>{e.videoWidth;const a=e.videoHeight,i=t.getContext("2d");t.width=a,t.height=a,i.drawImage(e,-a/4,0),i.rect(0,0,a,a);let n=.5*a,o=.2*a,r=i.createRadialGradient(a/2,a/2,o,a/2,a/2,n);return r.addColorStop(0,"rgba(0,0,0,0)"),r.addColorStop(1,"rgba(0,0,0,1)"),i.fillStyle=r,i.fill(),i.getImageData(0,0,a,a)},createParticles=()=>{const e=getImageDataFromVideo();d=new THREE.Geometry,rc=n[Math.floor(fxrand()*n.length)],l=new THREE.PointsMaterial({size:.2,color:new THREE.Color(rc.r,rc.g,rc.b),sizeAttenuation:!1});for(let t=0,a=e.height;t<a;t+=1)for(let a=0,i=e.width;a<i;a+=1){const i=new THREE.Vector3(a-e.width/2,-t+e.height/2,0);d.vertices.push(i)}s=new THREE.Points(d,l),h.add(s)}})();